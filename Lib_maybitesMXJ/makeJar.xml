<?xml version="1.0" encoding="UTF-8"?>
 	<project name="Lib_maybitesMXJ" default="default" basedir=".">
		<description>
 		======================================================================================
			Processing.org -> Eclipse Ant Builder for Applets and Applications
 		======================================================================================
 		</description>
        <property name="project.name" value="Lib_maybitesCore"/>
 		<property name="main.class.name" value=""/>
 		<property name="jar.name" value="maybitesMXJ.jar"/>
 		<property name="export.dir" value="${maybites.mxj.export.dir}"/>
 		<property name="createJavaDoc" value="0" />
 		
		<path id="library-classpath">
			<fileset dir="${libraryClasspath}" >
				<!-- #### (3) add the jar files that are required for compiling. edit name.
				 for more include files. duplicate <include name="" /> #### -->
				<include name="maybitesCore.jar"/>
				<include name="jitter.jar"/>
				<include name="max.jar"/>
			</fileset>
		</path>
 
 		<!--
 		==================================================================
 			DO NOT CHANGE BELOW UNLESS YOU KNOW WHAT YOU ARE DOIN
 		==================================================================-->		

 		 		<property name="project.javadoc.dir" value="javadoc"/>
 		 	   	<property name="project.bin.dir" value="bin"/>
		 	   	<property name="project.src.dir" value="src"/>
		 	   	<property name="project.libs.dir" value="libs"/>
 		 	   	<property name="project.build.dir" value="build"/>
 			   	<property name="project.library.dir" value="build/library"/>
 			   	<property name="project.reference.dir" value="build/reference"/>

 		 		<property file="${project.javadoc.dir}/building.properties"/>
 		     	
 				<target name ="default" description="check conditions">
 			 		<delete dir="${project.build.dir}"/>
 					<delete dir="${project.libs.dir}"/>
 			 			
 					<mkdir dir="${project.build.dir}"/>
 					<mkdir dir="${project.library.dir}"/>
 					<mkdir dir="${project.reference.dir}"/>
 			 		
 			 		<copy todir="${project.build.dir}/src">
 			 		    <fileset dir="${project.src.dir}"/>
 			 		</copy>

			 		<copy file="${maybites.core.jar}"
 			 		    todir="${project.libs.dir}"/>
			 		<copy file="${maxmsp.max.jar}"
 			 		    todir="${project.libs.dir}"/>
			 		<copy file="${maxmsp.jitter.jar}"
 			 		    todir="${project.libs.dir}"/>

 			 		<copy file="MIT.LICENSE"
 			 		    todir="${project.build.dir}"/>
 				
 					<condition property="makeDoc">
 						<equals arg1="${createJavaDoc}" arg2="1"/>
 	 				</condition>

 					<antcall target="doc.build"/>
 					<antcall target="jar.build"/>
 					
			 		<delete dir="${export.dir}"/>
 					<mkdir dir="${export.dir}"/>
   					<copy todir="${export.dir}">
 						<fileset dir="${project.build.dir}"/>
 					</copy>

 		 		</target>
 		 		
 				
 		 		<target name="jar.build">
 		 			<jar jarfile="${project.library.dir}/${jar.name}">
 				        <fileset dir="${project.bin.dir}">
 				        	<include name="**/*.class"/>
 				        </fileset>
 					    <manifest>
 		      				<attribute name="Built-By" value="${user.name}"/>
 		      				<attribute name="Main-Class" value="${main.class.name}"/>
 		    			</manifest>
 					</jar>	
 		  		</target>

 		 		<target name="doc.build" if="makeDoc">
 		 	    <!-- create the java reference of the library -->
 			 	    <javadoc bottom="library ${libraryName} by ${author}. ${copyright}"
 			 	 	     destdir="${project.reference.dir}"
 			 	 	     verbose="false"
 			 	 	     stylesheetfile="${project.javadoc.dir}/stylesheet.css"
 			 	 	     doctitle="Javadocs: ${libraryName}"
 			 	 	     public="true" version="false"
 			 	 	     windowtitle="Javadocs: ${libraryName}">
 			 	      <classpath>
 			 			<path refid="library-classpath"/>
 			 	      </classpath>
 			
 			 	      <tag name="invisible" scope="all" enabled="false"/>
 			 	      <tag name="related" scope="all" enabled="false"/>
 			 	      <tag name="extended" scope="all" enabled="false"/>
 			 	      <tag name="usage" scope="all" enabled="false"/>
 			
 			 	      <taglet name="ExampleTaglet" path="${project.javadoc.dir}/code" />
 			 	      <fileset dir="${project.src.dir}" defaultexcludes="yes">
 			 	 	<!-- #### (9) add packages to be added to reference. #### -->
 			 		<include name="**/*"/>
 			 	      </fileset>
 			 	    </javadoc>
 		 	  	</target>

 		 	</project>
 